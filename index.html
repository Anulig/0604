<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ —Å –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Buda:wght@300&family=Cormorant+Garamond:ital,wght@0,300;0,400;1,300&family=Courier+New&display=swap" rel="stylesheet">
    
    <style>
/* ===== –°–ë–†–û–° –ò –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    height: 100%;
    overflow: hidden;
    font-family: 'Cormorant Garamond', serif;
    background: #0a0b18;
    color: #f0e6d2;
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><circle cx="10" cy="10" r="7" fill="none" stroke="%23a3d5ff" stroke-width="0.7" stroke-opacity="0.7"/></svg>') 10 10, auto;
}

/* ===== –ù–ê–ß–ê–õ–¨–ù–ê–Ø –ó–ê–°–¢–ê–í–ö–ê ===== */
#splashScreen {
    position: fixed;
    width: 100%;
    height: 100%;
    background: #0a0b18;
    z-index: 2000;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 1;
    transition: opacity 2s ease;
}

#splashText {
    font-family: 'Buda', cursive;
    font-size: 2.5em;
    color: #f0e6d2;
    text-align: center;
    opacity: 0;
    transform: translateY(20px);
    text-shadow: 0 0 20px rgba(163, 213, 255, 0.5);
    animation: fadeInUp 3s ease forwards;
}

@keyframes fadeInUp {
    to { opacity: 1; transform: translateY(0); }
}

/* ===== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ô–ù–ï–† ===== */
#skyContainer {
    position: fixed;
    width: 100%;
    height: 100%;
    z-index: 1;
}

/* –§–æ–Ω –Ω–µ–±–∞ */
#nightSky {
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center,
        #0a0b18 0%,
        #070813 25%,
        #050610 50%,
        #03050c 75%,
        #020204 100%);
    z-index: 1;
}

/* –§–æ–Ω–æ–≤—ã–µ –∑–≤—ë–∑–¥—ã */
#backgroundStars {
    position: absolute;
    width: 100%;
    height: 100%;
    z-index: 2;
}

.bg-star {
    position: absolute;
    background-color: #fff;
    border-radius: 50%;
    opacity: 0.8;
}

/* –û—Å–Ω–æ–≤–Ω—ã–µ –∑–≤—ë–∑–¥—ã —Å –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏ */
.star {
    position: absolute;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.4s ease, box-shadow 0.4s ease;
    z-index: 5;
    animation: pulse 2.5s infinite ease-in-out;
}

/* –Ø—Ä–∫–æ–µ –º–µ—Ä—Ü–∞–Ω–∏–µ */
@keyframes pulse {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.1); }
}

.star:hover {
    transform: scale(1.4) !important;
    box-shadow: 0 0 30px rgba(255, 255, 255, 1),
                0 0 60px rgba(163, 213, 255, 0.7);
    animation-play-state: paused;
}

/* –¶–≤–µ—Ç–æ–≤—ã–µ –∞–∫—Ü–µ–Ω—Ç—ã */
.star.accent-blue {
    background-color: #a3d5ff;
    box-shadow: 0 0 20px rgba(163, 213, 255, 0.9);
}

.star.accent-gold {
    background-color: #ffd700;
    box-shadow: 0 0 20px rgba(255, 215, 0, 0.9);
}

/* –õ—É–Ω–∞ */
#moon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    background: radial-gradient(circle at 30% 30%,
        #f8f4e6 0%,
        #e6dfc5 20%,
        #d4c9a5 40%,
        #b8a87e 100%);
    border-radius: 50%;
    cursor: pointer;
    z-index: 6;
    box-shadow: 
        0 0 70px rgba(248, 244, 230, 0.8),
        0 0 120px rgba(248, 244, 230, 0.4),
        inset -8px -8px 15px rgba(100, 90, 70, 0.3);
    transition: all 0.5s ease;
}

#moon:hover {
    transform: translate(-50%, -50%) scale(1.1);
    box-shadow: 
        0 0 90px rgba(248, 244, 230, 1),
        0 0 160px rgba(248, 244, 230, 0.6);
}

#moonLabel {
    position: absolute;
    top: calc(50% + 60px);
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Buda', cursive;
    font-size: 0.9em;
    color: rgba(163, 213, 255, 0.9);
    opacity: 0;
    transition: opacity 0.5s ease;
    white-space: nowrap;
    z-index: 6;
}

#moon:hover + #moonLabel {
    opacity: 1;
}

/* ===== –ü–ï–ô–ó–ê–ñ - –ì–û–†–´ ===== */
.mountain-fade {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 35%;
    background: linear-gradient(to top, 
        rgba(10, 11, 24, 1) 0%,
        rgba(10, 11, 24, 0.5) 50%,
        transparent 100%);
    z-index: 2;
    pointer-events: none;
}

.mountains {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 45%;
    z-index: 3;
    opacity: 0;
    animation: mountainsAppear 3s ease 2s forwards;
    overflow: hidden;
}

.mountain-range {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 100%;
}

.mountain-layer {
    position: absolute;
    bottom: 0;
    width: 100%;
    background-color: #0a0f28;
    clip-path: polygon(0% 100%, 5% 80%, 10% 85%, 15% 70%, 20% 90%, 25% 75%,
                       30% 95%, 35% 65%, 40% 85%, 45% 60%, 50% 100%, 55% 70%,
                       60% 90%, 65% 55%, 70% 80%, 75% 50%, 80% 95%, 85% 65%,
                       90% 85%, 95% 75%, 100% 100%);
}

#mountains-back {
    height: 60%;
    background-color: #111a36;
    opacity: 0.7;
    clip-path: polygon(0% 100%, 10% 60%, 20% 80%, 30% 50%, 40% 70%, 50% 40%,
                       60% 90%, 70% 55%, 80% 75%, 90% 65%, 100% 100%);
}

#mountains-mid {
    height: 75%;
    background-color: #0d1530;
    opacity: 0.85;
    clip-path: polygon(0% 100%, 5% 40%, 15% 70%, 25% 30%, 35% 85%, 45% 45%,
                       55% 95%, 65% 35%, 75% 75%, 85% 50%, 95% 90%, 100% 100%);
}

#mountains-front {
    height: 90%;
    background-color: #080d22;
    opacity: 0.95;
    clip-path: polygon(0% 100%, 3% 20%, 8% 60%, 13% 10%, 18% 80%, 23% 25%,
                       28% 95%, 33% 15%, 38% 70%, 43% 35%, 48% 85%, 53% 45%,
                       58% 100%, 63% 30%, 68% 75%, 73% 50%, 78% 90%, 83% 40%,
                       88% 65%, 93% 55%, 98% 85%, 100% 100%);
}

@keyframes mountainsAppear {
    to { opacity: 1; }
}

/* –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª */
#secretCrystal {
    position: absolute;
    bottom: 22%;
    left: 20%;
    width: 10px;
    height: 10px;
    background: radial-gradient(circle, 
        rgba(200, 230, 255, 0.95) 0%,
        rgba(120, 180, 255, 0.8) 50%,
        transparent 70%);
    border-radius: 50%;
    cursor: pointer;
    z-index: 4;
    opacity: 0.4;
    animation: crystalGlow 3s infinite alternate ease-in-out;
    transition: all 0.3s;
    box-shadow: 0 0 10px rgba(163, 213, 255, 0.6);
}

#secretCrystal:hover {
    opacity: 1;
    transform: scale(1.8);
    box-shadow: 0 0 20px rgba(163, 213, 255, 0.9);
}

@keyframes crystalGlow {
    0% { opacity: 0.4; box-shadow: 0 0 8px rgba(163, 213, 255, 0.5); }
    100% { opacity: 0.7; box-shadow: 0 0 15px rgba(163, 213, 255, 0.8); }
}

/* ===== –®–õ–ï–ô–§ –ó–í–Å–ó–î–ù–û–ô –ü–´–õ–ò ===== */
.trail-dot {
    position: absolute;
    width: 4px;
    height: 4px;
    background-color: rgba(163, 213, 255, 0.5);
    border-radius: 50%;
    pointer-events: none;
    z-index: 4;
    box-shadow: 0 0 5px rgba(163, 213, 255, 0.5);
}

/* ===== –ü–ê–î–ê–Æ–©–ò–ï –ó–í–Å–ó–î–´ ===== */
.shooting-star {
    position: absolute;
    width: 80px;
    height: 2px;
    background: linear-gradient(90deg,
        transparent 0%,
        rgba(255, 255, 255, 1) 20%,
        rgba(255, 255, 255, 0.9) 50%,
        transparent 100%);
    border-radius: 1px;
    pointer-events: none;
    z-index: 3;
    transform: rotate(-45deg);
    opacity: 0;
}

/* ===== –§–ï–ô–ï–†–í–ï–†–ö ===== */
.firework {
    position: absolute;
    bottom: 18%;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    pointer-events: none;
    z-index: 2;
    opacity: 0;
}

/* ===== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê (–ö–†–ê–°–ò–í–´–ï) ===== */
.modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    background: rgba(8, 10, 26, 0.96);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(163, 213, 255, 0.25);
    border-radius: 20px;
    padding: 40px;
    max-width: 560px;
    width: 90%;
    z-index: 1000;
    text-align: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.1);
    box-shadow: 
        0 30px 80px rgba(0, 3, 15, 0.9),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.modal.active {
    opacity: 1;
    visibility: visible;
    transform: translate(-50%, -50%) scale(1);
}

.modal-content h2 {
    font-family: 'Buda', cursive;
    font-weight: 300;
    font-size: 2.3em;
    margin-bottom: 30px;
    color: #f0e6d2;
    letter-spacing: 1.5px;
    text-shadow: 0 0 25px rgba(240, 230, 210, 0.5);
}

.modal-content p {
    font-family: 'Cormorant Garamond', serif;
    font-weight: 300;
    font-size: 1.45em;
    line-height: 1.8;
    color: #e6f2ff;
    margin-bottom: 30px;
    text-align: center;
}

.instruction-text {
    text-align: center;
    font-style: italic;
    color: #a3d5ff;
    font-size: 1.15em;
    margin-top: 25px;
    line-height: 1.7;
}

/* –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è */
.close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: none;
    border: none;
    color: #a3d5ff;
    font-size: 28px;
    font-family: 'Courier New', monospace;
    cursor: pointer;
    width: 34px;
    height: 34px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    transition: all 0.3s ease;
}

.close-btn:hover {
    color: #fff;
    background: rgba(163, 213, 255, 0.15);
    transform: rotate(90deg);
}

/* –ü–æ–ª–µ –¥–ª—è –≤–≤–æ–¥–∞ –∂–µ–ª–∞–Ω–∏—è */
#wishInput {
    width: 100%;
    height: 130px;
    background: rgba(4, 6, 18, 0.8);
    border: 1px solid rgba(163, 213, 255, 0.35);
    border-radius: 14px;
    padding: 20px;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.25em;
    color: #f0e6d2;
    resize: none;
    margin-bottom: 25px;
    transition: all 0.3s ease;
}

#wishInput:focus {
    outline: none;
    border: 1px solid rgba(163, 213, 255, 0.8);
    box-shadow: 0 0 25px rgba(163, 213, 255, 0.4);
}

/* –ö–Ω–æ–ø–∫–∏ */
.btn {
    background: linear-gradient(135deg,
        rgba(100, 130, 230, 0.95) 0%,
        rgba(150, 110, 230, 0.9) 100%);
    color: white;
    border: none;
    padding: 16px 38px;
    border-radius: 50px;
    font-family: 'Buda', cursive;
    font-size: 1.15em;
    cursor: pointer;
    transition: all 0.3s ease;
    letter-spacing: 1px;
    margin: 10px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
}

.btn:hover {
    transform: translateY(-5px);
    box-shadow: 0 15px 35px rgba(150, 110, 230, 0.5);
}

/* –°—á—ë—Ç—á–∏–∫ –∑–≤—ë–∑–¥ */
#counter {
    position: fixed;
    top: 25px;
    right: 25px;
    background: rgba(8, 10, 26, 0.8);
    border: 1px solid rgba(163, 213, 255, 0.3);
    border-radius: 14px;
    padding: 14px 20px;
    font-family: 'Courier New', monospace;
    font-size: 1em;
    color: #a3d5ff;
    z-index: 100;
    backdrop-filter: blur(10px);
    min-width: 160px;
    text-align: center;
    opacity: 0;
    animation: counterAppear 1s ease 3.5s forwards;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
}

@keyframes counterAppear {
    to { opacity: 1; }
}

#counter span {
    color: #ffd700;
    font-weight: bold;
    font-size: 1.3em;
    text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
}

/* –ê–Ω–∏–º–∞—Ü–∏—è —É–ª–µ—Ç–∞—é—â–µ–≥–æ –∂–µ–ª–∞–Ω–∏—è */
.flying-wish {
    position: absolute;
    pointer-events: none;
    z-index: 999;
    font-family: 'Cormorant Garamond', serif;
    font-size: 1.4em;
    color: #ffeb3b;
    text-shadow: 
        0 0 10px rgba(255, 235, 59, 0.8),
        0 0 20px rgba(255, 235, 59, 0.4);
    white-space: nowrap;
    opacity: 1;
}

/* –§—É—Ç–µ—Ä */
footer {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    font-family: 'Courier New', monospace;
    font-size: 0.8em;
    color: rgba(163, 213, 255, 0.5);
    z-index: 10;
    text-align: center;
    width: 100%;
    pointer-events: none;
    opacity: 0;
    animation: footerAppear 2s ease 4s forwards;
    text-shadow: 0 0 5px rgba(163, 213, 255, 0.3);
}

@keyframes footerAppear {
    to { opacity: 1; }
}
</style>
</head>
<body>
    <!-- –ù–∞—á–∞–ª—å–Ω–∞—è –∑–∞—Å—Ç–∞–≤–∫–∞ -->
    <div id="splashScreen">
        <div id="splashText">–°–µ–≥–æ–¥–Ω—è –æ—Å–æ–±–µ–Ω–Ω—ã–π –¥–µ–Ω—å...</div>
    </div>
    
    <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
    <div id="skyContainer">
        <div id="nightSky"></div>
        <div id="backgroundStars"></div>
        <div id="mainStars"></div>
        
        <!-- –ì–æ—Ä—ã -->
        <div class="mountain-fade"></div>
        <div class="mountains">
            <div class="mountain-range">
                <div class="mountain-layer" id="mountains-back"></div>
                <div class="mountain-layer" id="mountains-mid"></div>
                <div class="mountain-layer" id="mountains-front"></div>
            </div>
        </div>
        
        <!-- –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫—Ä–∏—Å—Ç–∞–ª–ª -->
        <div id="secretCrystal" title="–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –º–µ–Ω—è"></div>
        
        <!-- –õ—É–Ω–∞ -->
        <div id="moon" title="–ó–∞–≥–∞–¥–∞—Ç—å –∂–µ–ª–∞–Ω–∏–µ"></div>
        <div id="moonLabel">–ó–∞–≥–∞–¥–∞—Ç—å –∂–µ–ª–∞–Ω–∏–µ</div>
        
        <!-- –°—á—ë—Ç—á–∏–∫ -->
        <div id="counter">–ù–∞–π–¥–µ–Ω–æ –∑–≤—ë–∑–¥: <span id="foundCount">0</span> / 12</div>
    </div>
    
    <!-- –û–∫–Ω–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ -->
    <div id="instructionModal" class="modal">
        <button class="close-btn" id="closeInstruction">&times;</button>
        <div class="modal-content">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –ø–æ–¥ –∑–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ</h2>
            <p>–ü–µ—Ä–µ–¥ –í–∞–º–∏ ‚Äî 12 –∑–≤—ë–∑–¥. –ö–∞–∂–¥–∞—è —Ö—Ä–∞–Ω–∏—Ç –Ω–µ–±–æ–ª—å—à–æ–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ.</p>
            <p>–í —Ü–µ–Ω—Ç—Ä–µ ‚Äî –õ—É–Ω–∞. –û–Ω–∞ –ø–æ–º–æ–∂–µ—Ç –í–∞–º –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ –∫ –∑–≤—ë–∑–¥–∞–º.</p>
            <p>–ö–æ–≥–¥–∞ –í—ã –Ω–∞–π–¥—ë—Ç–µ –≤—Å–µ –∑–≤—ë–∑–¥—ã –∏ –∑–∞–≥–∞–¥–∞–µ—Ç–µ —Å–≤–æ—ë ‚Äî –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–µ –ø–æ—Å–ª–∞–Ω–∏–µ —ç—Ç–æ–≥–æ –¥–Ω—è.</p>
            <p class="instruction-text">–ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π—Ç–µ –Ω–∞ –∑–≤—ë–∑–¥—ã –∏ —Å–ª–µ–¥—É–π—Ç–µ –∑–∞ —Å–≤–µ—Ç–æ–º.</p>
            <button class="btn" id="startBtn">–ù–∞—á–∞—Ç—å</button>
        </div>
    </div>
    
    <!-- –û–∫–Ω–æ –ø–æ–∂–µ–ª–∞–Ω–∏—è –æ—Ç –∑–≤–µ–∑–¥—ã -->
    <div id="wishModal" class="modal">
        <button class="close-btn" id="closeWish">&times;</button>
        <div class="modal-content"><p id="wishTextContent"></p></div>
    </div>
    
    <!-- –û–∫–Ω–æ "–ó–∞–≥–∞–¥–∞—Ç—å –∂–µ–ª–∞–Ω–∏–µ" -->
    <div id="makeWishModal" class="modal">
        <button class="close-btn" id="closeMakeWish">&times;</button>
        <div class="modal-content">
            <h2>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –∂–µ–ª–∞–Ω–∏–µ –∫ –∑–≤—ë–∑–¥–∞–º</h2>
            <p>–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ ‚Äî –æ–Ω–æ —É–ª–µ—Ç–∏—Ç –≤ –Ω–æ—á–Ω–æ–µ –Ω–µ–±–æ –∏ —Å—Ç–∞–Ω–µ—Ç —á–∞—Å—Ç—å—é —ç—Ç–æ–π –∑–≤—ë–∑–¥–Ω–æ–π –∫–∞—Ä—Ç—ã.</p>
            <textarea id="wishInput" placeholder="–ü—É—Å—Ç—å –∑–¥–µ—Å—å –±—É–¥–µ—Ç –í–∞—à–µ —Å–∞–º–æ–µ —Å–æ–∫—Ä–æ–≤–µ–Ω–Ω–æ–µ..."></textarea>
            <button class="btn" id="sendWishBtn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫ –∑–≤—ë–∑–¥–∞–º</button>
            <p style="font-size: 0.95em; color: #a3d5ff; margin-top: 20px;">*–í —Ü–µ–ª—è—Ö –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–µ–∫—Å—Ç –∂–µ–ª–∞–Ω–∏—è –Ω–∏–≥–¥–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è.</p>
        </div>
    </div>
    
    <!-- –§–∏–Ω–∞–ª—å–Ω–æ–µ –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ -->
    <div id="finalModal" class="modal">
        <div class="modal-content">
            <h2>–° –¥–Ω—ë–º —Ä–æ–∂–¥–µ–Ω–∏—è!</h2>
            <p>–ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å—ë—Ç –ª—ë–≥–∫–æ—Å—Ç—å. –ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞ —Ä–∞–¥–æ–≤–∞–ª–∞, –∫–∞–∫ –ª—é–±–∏–º–æ–µ —Ö–æ–±–±–∏, —É—á–µ–Ω–∏–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ —Å –≥–æ—Ä—è—â–∏–º–∏ –≥–ª–∞–∑–∞–º–∏, –∞ –≤–µ—á–µ—Ä–∞ –Ω–∞—Ö–æ–¥–∏–ª–∏ –í–∞—Å —Å —á–∞—à–∫–æ–π –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ —á–∞—è –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –º—ã—Å–ª—å—é –≤ –≥–æ–ª–æ–≤–µ.</p>
            <p>–ß—Ç–æ–±—ã –≥–æ–¥—ã –Ω–µ –∏–∑–º–µ—Ä—è–ª–∏—Å—å –≥—Ä—É–∑–æ–º, –∞ —Ç–æ–ª—å–∫–æ –º—É–¥—Ä–æ—Å—Ç—å—é –∏ —Å–≤–æ–±–æ–¥–æ–π ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –±—ã—Ç—å —Å–æ–±–æ–π –±–µ–∑ –æ–≥–ª—è–¥–∫–∏ –∏ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –º–∏—Ä —Å —Ç–µ–º —Å–∞–º—ã–º —Ç–∏—Ö–∏–º, –Ω–µ–Ω–∞–≤—è–∑—á–∏–≤—ã–º –∏–Ω—Ç–µ—Ä–µ—Å–æ–º, –∫–æ—Ç–æ—Ä—ã–π –í—ã –∫–æ–≥–¥–∞-—Ç–æ –≤ –∫–æ–º-—Ç–æ —Ä–∞–∑–±—É–¥–∏–ª–∏.</p>
            <p>–ü—É—Å—Ç—å –≤—Å–µ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ!</p>
            <p style="text-align: right; margin-top: 35px; font-style: italic; color: #a3d5ff;">–° —Ç–µ–ø–ª–æ–º –∏ —É–≤–∞–∂–µ–Ω–∏–µ–º.</p>
        </div>
    </div>
    
    <!-- –û–∫–Ω–æ –∫—Ä–∏—Å—Ç–∞–ª–ª–∞ -->
    <div id="crystalModal" class="modal">
        <button class="close-btn" id="closeCrystal">&times;</button>
        <div class="modal-content">
            <h2 style="font-size: 3em; margin-bottom: 10px;">üíé</h2>
            <p style="font-size: 1.5em; color: #a3d5ff;">–ü—É—Å—Ç—å –≤—Å–µ –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ.</p>
        </div>
    </div>
    
    <footer>–≠—Ç–æ –∑–≤—ë–∑–¥–Ω–æ–µ –Ω–µ–±–æ —Å–æ–∑–¥–∞–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è –í–∞—Å</footer>

    <script>
        // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
        const TOTAL_STARS = 12;
        const WISH_TEXTS = [
            "–ß—Ç–æ–±—ã —É—Ç—Ä–æ –∏–Ω–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å –Ω–µ —Å –±—É–¥–∏–ª—å–Ω–∏–∫–∞, –∞ —Å —Å–æ–ª–Ω–µ—á–Ω–æ–≥–æ –∑–∞–π—á–∏–∫–∞ –Ω–∞ —Å—Ç–µ–Ω–µ.",
            "–ß—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏–Ω–æ—Å–∏–ª–∞ –ª—ë–≥–∫–æ—Å—Ç—å –æ—Ç–∫—Ä—ã—Ç–∏–π, –∞ –Ω–µ —Ç—è–∂–µ—Å—Ç—å –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π.",
            "–ß—Ç–æ–±—ã –±—É–¥—É—â–µ–µ –Ω–µ –¥–∞–≤–∏–ª–æ, –∞ –ª–∏—à—å –º—è–≥–∫–æ –∏—Å–∫—Ä–∏–≤–ª—è–ª–æ –ø–ª–∞–Ω—ã, –∫–∞–∫ –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è ‚Äî –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ.",
            "–ß—Ç–æ–±—ã —á–∞–π –≤ —á–∞—à–∫–µ –±—ã–ª –≤—Å–µ–≥–¥–∞ –Ω—É–∂–Ω–æ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ –∫—Ä–µ–ø–æ—Å—Ç–∏.",
            "–ß—Ç–æ–±—ã —É—á–µ–Ω–∏–∫–∏ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ –Ω–µ –∑–∞ –æ—Ü–µ–Ω–∫–æ–π, –∞ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–º.",
            "–ß—Ç–æ–±—ã –Ω–µ–±–æ –Ω–∞–¥ –≥–æ–ª–æ–≤–æ–π –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å —è—Å–Ω—ã–º, –∞ –≥–æ—Ä–∏–∑–æ–Ω—Ç ‚Äî –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª—Å—è —Ç—É–º–∞–Ω–æ–º.",
            "–ß—Ç–æ–±—ã –¥–æ—Ä–æ–≥–∞ –¥–æ–º–æ–π –∏–Ω–æ–≥–¥–∞ –ø–æ–∑–≤–æ–ª—è–ª–∞ —Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–¥ –Ω–æ–≥–∏ ‚Äî –∏ —á—Ç–æ–±—ã –≤–∑–≥–ª—è–¥ –Ω–∞—Ö–æ–¥–∏–ª —á—Ç–æ-—Ç–æ —Å—Ç–æ—è—â–µ–µ –≤–Ω–∏–º–∞–Ω–∏—è.",
            "–ß—Ç–æ–±—ã –≤–æ—Å–ø–æ–º–∏–Ω–∞–Ω–∏—è –Ω–µ —Ç—è–∂–µ–ª–µ–ª–∏ —Å –≥–æ–¥–∞–º–∏, –∞, –∫–∞–∫ —Ö–æ—Ä–æ—à–∏–π —Å–ø–µ–∫—Ç—Ä, –ª–∏—à—å —Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å —á—ë—Ç—á–µ –≤ –≥–ª–∞–≤–Ω—ã—Ö —á–µ—Ä—Ç–∞—Ö.",
            "–ß—Ç–æ–±—ã –≤ –í–∞—à–µ–π –∂–∏–∑–Ω–∏ –≤—Å–µ–≥–¥–∞ –æ—Å—Ç–∞–≤–∞–ª–æ—Å—å –º–µ—Å—Ç–æ –¥–ª—è —Å—Ç—Ä–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–µ–¥–∞–Ω–Ω—ã—Ö —Å–ø—É—Ç–Ω–∏–∫–æ–≤ ‚Äî —Ç–µ—Ö, –∫—Ç–æ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Å–ª–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –∏—Ö –æ—Ä–±–∏—Ç—ã —Å—Ç–∞–ª–∏ –¥–∞–ª—ë–∫–∏–º–∏.",
            "–ß—Ç–æ–±—ã –ø–µ—Ä–≤–∞—è –∫–ª—É–±–Ω–∏–∫–∞ –≤ —Å–µ–∑–æ–Ω–µ –±—ã–ª–∞ —Å–ª–∞–¥–∫–æ–π, –∞ –ø–µ—Ä–≤–∞—è —Å–Ω–µ–∂–∏–Ω–∫–∞ ‚Äî –ø—É—à–∏—Å—Ç–æ–π.",
            "–ß—Ç–æ–±—ã –∏–Ω–æ–≥–¥–∞, —á–∏—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ, –≤—Å—ë —Å–∫–ª–∞–¥—ã–≤–∞–ª–æ—Å—å –∫–∞–∫ –Ω–∞–¥–æ ‚Äî –±–µ–∑ —É—Å–∏–ª–∏–π, –ø–æ –≤–æ–ª—à–µ–±—Å—Ç–≤—É.",
            "–ß—Ç–æ–±—ã –ø–æ–µ–∑–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ –≤–æ–≤—Ä–µ–º—è, –∞ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏ ‚Äî –∫–∞–∫ —Ä–∞–∑ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –æ–Ω–∏ –Ω—É–∂–Ω—ã."
        ];
        
        const FIREWORK_COLORS = ['#FFD700', '#A3D5FF', '#D4A5FF', '#FFB6C1', '#98FB98', '#FFA07A'];
        
        // ==================== –°–û–°–¢–û–Ø–ù–ò–ï ====================
        let foundStars = new Set();
        let userWishMade = false;
        let trailDots = [];
        
        // ==================== –≠–õ–ï–ú–ï–ù–¢–´ DOM ====================
        const splashScreen = document.getElementById('splashScreen');
        const splashText = document.getElementById('splashText');
        const mainStarsContainer = document.getElementById('mainStars');
        const backgroundStarsContainer = document.getElementById('backgroundStars');
        const instructionModal = document.getElementById('instructionModal');
        const wishModal = document.getElementById('wishModal');
        const makeWishModal = document.getElementById('makeWishModal');
        const finalModal = document.getElementById('finalModal');
        const crystalModal = document.getElementById('crystalModal');
        const moon = document.getElementById('moon');
        const secretCrystal = document.getElementById('secretCrystal');
        const counter = document.getElementById('counter');
        const foundCountEl = document.getElementById('foundCount');
        const wishTextContentEl = document.getElementById('wishTextContent');
        const wishInput = document.getElementById('wishInput');
        const sendWishBtn = document.getElementById('sendWishBtn');
        const startBtn = document.getElementById('startBtn');
        
        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        function init() {
            console.log('üöÄ –°–∞–π—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è');
            
            setTimeout(() => {
                splashText.style.animation = 'fadeInUp 3s ease forwards';
                console.log('üìù –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç');
                
                setTimeout(() => {
                    splashScreen.style.opacity = '0';
                    console.log('üåÖ –£–±–∏—Ä–∞–µ–º –∑–∞—Å—Ç–∞–≤–∫—É');
                    
                    setTimeout(() => {
                        splashScreen.style.display = 'none';
                        instructionModal.classList.add('active');
                        console.log('‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é');
                    }, 2000);
                }, 3000);
            }, 500);
            
            createBackgroundStars();
            createMainStars();
            setupEventListeners();
            initTrail();
            startShootingStars();
            
            console.log('üéØ –í—Å—ë –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
        }
        
        // ==================== –°–û–ó–î–ê–ù–ò–ï –ó–í–Å–ó–î ====================
        function createBackgroundStars() {
            for (let i = 0; i < 150; i++) {
                const star = document.createElement('div');
                star.className = 'bg-star';
                const size = Math.random() * 2 + 0.8;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 85}%`;
                star.style.opacity = Math.random() * 0.5 + 0.3;
                backgroundStarsContainer.appendChild(star);
            }
        }
        
        function createMainStars() {
            mainStarsContainer.innerHTML = '';
            const positions = [];
            
            for (let i = 0; i < TOTAL_STARS; i++) {
                let x = Math.random() * 40 + 10;
                let y = Math.random() * 20 + 10;
                
                for (let attempt = 0; attempt < 20; attempt++) {
                    let tooClose = false;
                    for (const pos of positions) {
                        const dx = x - pos.x;
                        const dy = y - pos.y;
                        if (Math.sqrt(dx*dx + dy*dy) < 12) {
                            tooClose = true;
                            break;
                        }
                    }
                    
                    if (!tooClose) break;
                    x = Math.random() * 80 + 10;
                    y = Math.random() * 60 + 10;
                }
                
                positions.push({ x, y });
                const star = document.createElement('div');
                star.className = 'star';
                star.dataset.index = i;
                
                let size = 14;
                if (i % 4 === 0) size = 18;
                if (i % 5 === 0) size = 10;
                
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                
                if (i === 1 || i === 4 || i === 7 || i === 10) {
                    star.classList.add('accent-blue');
                } else if (i === 3 || i === 9) {
                    star.classList.add('accent-gold');
                } else {
                    star.style.backgroundColor = '#fff';
                    star.style.boxShadow = '0 0 15px rgba(255, 255, 255, 0.8)';
                }
                
                star.style.animationDelay = `${Math.random() * 2}s`;
                star.addEventListener('click', () => showWish(i));
                mainStarsContainer.appendChild(star);
            }
        }
        
        // ==================== –û–¢–ü–†–ê–í–ö–ê –í TELEGRAM ====================
        function sendToTelegram(wishText) {
            console.log('üì§ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram:', wishText);
            
            // üîΩ –í–°–¢–ê–í–¨ –°–Æ–î–ê –°–í–û–ô GOOGLE SCRIPT URL üîΩ
            const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwcs5ZUJ__O1Op2vhAFBXgfOXWhNbefiuagNPpkqB7M7g_3dG5NF_BWTGBEK82hX_VR/exec';
            
            const fullMessage = `‚ú® –ù–û–í–û–ï –ñ–ï–õ–ê–ù–ò–ï:\n\n${wishText}\n\nüìÖ ${new Date().toLocaleString('ru-RU')}`;
            
            console.log('üì® –°–æ–æ–±—â–µ–Ω–∏–µ:', fullMessage);
            console.log('üåê –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞:', GOOGLE_SCRIPT_URL);
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —á–µ—Ä–µ–∑ Google Script
            fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ wish: fullMessage })
            }).then(() => {
                console.log('‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ Google Script');
            }).catch(error => {
                console.log('‚ö†Ô∏è –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', error);
            });
        }
        
        // ==================== –û–°–ù–û–í–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
        function showWish(starIndex) {
            foundStars.add(starIndex);
            updateCounter();
            wishTextContentEl.textContent = WISH_TEXTS[starIndex];
            wishModal.classList.add('active');
            checkForFinal();
        }
        
        function sendUserWish() {
            const text = wishInput.value.trim();
            
            if (!text) {
                alert('–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ—ë –∂–µ–ª–∞–Ω–∏–µ!');
                wishInput.focus();
                return;
            }
            
            if (text.length > 500) {
                alert('–°–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ –∂–µ–ª–∞–Ω–∏–µ. –ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤.');
                return;
            }
            
            console.log('üìù –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∂–µ–ª–∞–Ω–∏–µ:', text);
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
            sendToTelegram(text);
            
            // –ê–Ω–∏–º–∞—Ü–∏—è
            createFlyingWishAnimation(text);
            userWishMade = true;
            wishInput.value = '';
            makeWishModal.classList.remove('active');
            
            checkForFinal();
        }
        
        function createFlyingWishAnimation(text) {
            const flyingText = document.createElement('div');
            flyingText.className = 'flying-wish';
            flyingText.textContent = text;
            flyingText.style.left = '50%';
            flyingText.style.top = '50%';
            flyingText.style.transform = 'translate(-50%, -50%)';
            document.body.appendChild(flyingText);
            
            const targetX = Math.random() * 75 + 12.5;
            const targetY = Math.random() * 35 + 10;
            const duration = 2000;
            const startTime = Date.now();
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                if (progress < 1) {
                    const x = 50 + (targetX - 50) * progress;
                    const y = 50 + (targetY - 50) * progress;
                    const scale = 1 - progress * 0.6;
                    const opacity = 1 - progress;
                    
                    flyingText.style.left = `${x}%`;
                    flyingText.style.top = `${y}%`;
                    flyingText.style.transform = `translate(-50%, -50%) scale(${scale})`;
                    flyingText.style.opacity = opacity;
                    
                    requestAnimationFrame(animate);
                } else {
                    flyingText.remove();
                }
            }
            
            animate();
        }
        
        function updateCounter() {
            foundCountEl.textContent = foundStars.size;
            if (foundStars.size === TOTAL_STARS) {
                counter.style.color = '#ffd700';
                counter.style.borderColor = 'rgba(255, 215, 0, 0.6)';
                counter.style.boxShadow = '0 0 20px rgba(255, 215, 0, 0.4)';
            }
        }
        
        function checkForFinal() {
            if (foundStars.size === TOTAL_STARS && userWishMade) {
                closeAllModals();
                setTimeout(() => {
                    finalModal.classList.add('active');
                    setTimeout(startFireworks, 1200);
                }, 1000);
            }
        }
        
        function closeAllModals() {
            [instructionModal, wishModal, makeWishModal, crystalModal].forEach(modal => {
                modal.classList.remove('active');
            });
        }
        
        // ==================== –ê–ù–ò–ú–ê–¶–ò–ò ====================
        function initTrail() {
            let lastX = 0, lastY = 0;
            document.addEventListener('mousemove', (e) => {
                const dx = e.clientX - lastX;
                const dy = e.clientY - lastY;
                if (Math.sqrt(dx*dx + dy*dy) > 10) {
                    createTrailDot(e.clientX, e.clientY);
                    lastX = e.clientX;
                    lastY = e.clientY;
                }
            });
        }
        
        function createTrailDot(x, y) {
            const dot = document.createElement('div');
            dot.className = 'trail-dot';
            dot.style.left = `${x}px`;
            dot.style.top = `${y}px`;
            dot.style.opacity = '0.3';
            document.body.appendChild(dot);
            setTimeout(() => dot.remove(), 1000);
        }
        
        function startShootingStars() {
            function createShootingStar() {
                const star = document.createElement('div');
                star.className = 'shooting-star';
                star.style.left = `${Math.random() * 100 + 100}%`;
                star.style.top = `${Math.random() * 40}%`;
                document.getElementById('skyContainer').appendChild(star);
                
                setTimeout(() => {
                    star.style.transition = 'all 2s linear';
                    star.style.left = '-100%';
                    star.style.opacity = '1';
                    setTimeout(() => star.remove(), 2000);
                }, 100);
            }
            
            setTimeout(() => {
                createShootingStar();
                setInterval(createShootingStar, 30000 + Math.random() * 30000);
            }, 5000);
        }
        
        function startFireworks() {
            for (let i = 0; i < 8; i++) {
                setTimeout(() => createFirework(), i * 500 + Math.random() * 300);
            }
        }
        
        function createFirework() {
            const firework = document.createElement('div');
            firework.className = 'firework';
            firework.style.left = `${Math.random() * 80 + 10}%`;
            firework.style.bottom = `${18 + Math.random() * 15}%`;
            firework.style.backgroundColor = FIREWORK_COLORS[Math.floor(Math.random() * FIREWORK_COLORS.length)];
            document.getElementById('skyContainer').appendChild(firework);
            
            setTimeout(() => {
                firework.style.transition = 'all 0.5s ease';
                firework.style.opacity = '1';
                firework.style.transform = 'scale(3)';
                setTimeout(() => {
                    firework.style.opacity = '0';
                    firework.style.transform = 'scale(0.5)';
                    setTimeout(() => firework.remove(), 500);
                }, 300);
            }, 100);
        }
        
        // ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ====================
        function setupEventListeners() {
            startBtn.addEventListener('click', () => instructionModal.classList.remove('active'));
            document.getElementById('closeInstruction').addEventListener('click', () => instructionModal.classList.remove('active'));
            document.getElementById('closeWish').addEventListener('click', () => wishModal.classList.remove('active'));
            document.getElementById('closeMakeWish').addEventListener('click', () => makeWishModal.classList.remove('active'));
            document.getElementById('closeCrystal').addEventListener('click', () => crystalModal.classList.remove('active'));
            moon.addEventListener('click', () => { makeWishModal.classList.add('active'); wishInput.focus(); });
            secretCrystal.addEventListener('click', () => crystalModal.classList.add('active'));
            sendWishBtn.addEventListener('click', sendUserWish);
            
            wishInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendUserWish();
                }
            });
            
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.modal') && !e.target.closest('.star') && 
                    !e.target.closest('#moon') && !e.target.closest('#secretCrystal')) {
                    closeAllModals();
                }
            });
        }
        
        // ==================== –ó–ê–ü–£–°–ö ====================
        window.addEventListener('DOMContentLoaded', init);
        document.addEventListener('contextmenu', (e) => e.preventDefault());
    </script>
</body>
</html>
